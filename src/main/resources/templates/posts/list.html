<!-- src/main/resources/templates/posts/list.html -->
<!doctype html>
<html lang="ko">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title>crudboard | Posts</title>
    <link rel="stylesheet" href="/css/posts.css">
</head>
<body>
<div class="container">
    <div class="card" id="card">
        <header>
            <div>
                <h1>게시글 목록</h1>
                <div class="muted" id="summary">-</div>

                <!-- ✅ Auth 상태 표시 -->
                <div class="muted auth-badge" style="margin-top:6px;">
                    <span class="pill" id="authPill">로그인 확인 중...</span>
                    <span id="authHint" style="display:none;">(로그인 후 글쓰기가 가능합니다)</span>
                </div>
            </div>

            <!-- 검색 고도화 UI -->
            <div class="actions" style="gap:8px; flex-wrap: wrap;">
                <input id="keyword" type="text" placeholder="검색어" />

                <select id="type">
                    <option value="">전체</option>
                    <option value="TITLE">제목</option>
                    <option value="CONTENT">내용</option>
                    <option value="TITLE_CONTENT">제목+내용</option>
                </select>

                <input id="createdFrom" type="datetime-local" />
                <input id="createdTo" type="datetime-local" />

                <select id="sort">
                    <option value="createdAt,desc">작성일 ↓</option>
                    <option value="createdAt,asc">작성일 ↑</option>
                    <option value="updatedAt,desc">수정일 ↓</option>
                    <option value="updatedAt,asc">수정일 ↑</option>
                    <option value="id,desc">ID ↓</option>
                    <option value="id,asc">ID ↑</option>
                </select>

                <select id="size">
                    <option value="5">5개</option>
                    <option value="10">10개</option>
                    <option value="20">20개</option>
                    <option value="50">50개</option>
                </select>

                <button id="searchBtn">검색</button>
                <button id="resetBtn" class="btn">초기화</button>

                <!-- ✅ 글쓰기 버튼(로그인 시에만 활성화) -->
                <a class="btn primary" id="writeBtn" href="/posts/new">글쓰기</a>
            </div>
        </header>

        <div class="error" id="errorBox"></div>

        <table aria-label="posts">
            <thead>
            <tr>
                <th style="width: 80px;">ID</th>
                <th>제목</th>
                <th style="width: 190px;">작성일</th>
                <th style="width: 190px;">수정일</th>
            </tr>
            </thead>
            <tbody id="tbody">
            <!-- rows injected -->
            </tbody>
        </table>

        <div class="footer">
            <div class="muted">
                <span class="pill" id="pageInfo">page - / -</span>
            </div>
            <div class="pager">
                <button id="prevBtn">이전</button>
                <button id="nextBtn">다음</button>
            </div>
        </div>
    </div>
</div>
<script type="module" src="/js/pages/post-list.page.js"></script>
</body>
</html>